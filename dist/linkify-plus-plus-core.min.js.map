{"version":3,"file":"linkify-plus-plus-core.min.js","sources":["../lib/url-matcher.js","../node_modules/event-lite/event-lite.mjs","../lib/linkifier.js"],"sourcesContent":["var tlds = require(\"./tlds.json\"),\n\tRE = {\n\t\tPROTOCOL: \"([a-z][-a-z*]+://)?\",\n\t\tUSER: \"(?:([\\\\w:.+-]+)@)?\",\n\t\tDOMAIN_UNI: `([a-z0-9-.\\\\u00A0-\\\\uFFFF]+\\\\.[a-z0-9-${tlds.chars}]{1,${tlds.maxLength}})`,\n\t\tDOMAIN: `([a-z0-9-.]+\\\\.[a-z0-9-]{1,${tlds.maxLength}})`,\n\t\tPORT: \"(:\\\\d+\\\\b)?\",\n\t\tPATH_UNI: \"([/?#]\\\\S*)?\",\n\t\tPATH: \"([/?#][\\\\w-.~!$&*+;=:@%/?#(),'\\\\[\\\\]]*)?\"\n\t},\n\tTLD_TABLE = tlds.table;\n\nfunction regexEscape(text) {\n\treturn text.replace(/[[\\]\\\\^-]/g, \"\\\\$&\");\n}\n\nfunction buildRegex({\n\tunicode = false, customRules = [], standalone = false,\n\tboundaryLeft, boundaryRight\n}) {\n\tvar pattern = RE.PROTOCOL + RE.USER;\n\t\n\tif (unicode) {\n\t\tpattern += RE.DOMAIN_UNI + RE.PORT + RE.PATH_UNI;\n\t} else {\n\t\tpattern += RE.DOMAIN + RE.PORT + RE.PATH;\n\t}\n\t\n\tif (customRules.length) {\n\t\tpattern = \"(?:(\" + customRules.join(\"|\") + \")|\" + pattern + \")\";\n\t} else {\n\t\tpattern = \"()\" + pattern;\n\t}\n\t\n\tvar prefix, suffix, invalidSuffix;\n\tif (standalone) {\n\t\tif (boundaryLeft) {\n\t\t\tprefix = \"((?:^|\\\\s)[\" + regexEscape(boundaryLeft) + \"]*?)\";\n\t\t} else {\n\t\t\tprefix = \"(^|\\\\s)\";\n\t\t}\n\t\tif (boundaryRight) {\n\t\t\tsuffix = \"([\" + regexEscape(boundaryRight) + \"]*(?:$|\\\\s))\";\n\t\t} else {\n\t\t\tsuffix = \"($|\\\\s)\";\n\t\t}\n\t\tinvalidSuffix = \"[^\\\\s\" + regexEscape(boundaryRight) + \"]\";\n\t} else {\n\t\tprefix = \"(^|\\\\b|_)\";\n\t\tsuffix = \"()\";\n\t}\n\t\n\tpattern = prefix + pattern + suffix;\n\t\n\treturn {\n\t\turl: new RegExp(pattern, \"igm\"),\n\t\tinvalidSuffix: invalidSuffix && new RegExp(invalidSuffix),\n\t\tmustache: /\\{\\{[\\s\\S]+?\\}\\}/g\n\t};\n}\n\nfunction pathStrip(m, re, repl) {\n\tvar s = m.path.replace(re, repl);\n\n\tif (s == m.path) return;\n\t\n\tm.end -= m.path.length - s.length;\n\tm.suffix = m.path.slice(s.length) + m.suffix;\n\tm.path = s;\n}\n\nfunction pathStripQuote(m, c) {\n\tvar i = 0, s = m.path, end, pos = 0;\n\t\n\tif (!s.endsWith(c)) return;\n\t\n\twhile ((pos = s.indexOf(c, pos)) >= 0) {\n\t\tif (i % 2) {\n\t\t\tend = null;\n\t\t} else {\n\t\t\tend = pos;\n\t\t}\n\t\tpos++;\n\t\ti++;\n\t}\n\t\n\tif (!end) return;\n\t\n\tm.end -= s.length - end;\n\tm.path = s.slice(0, end);\n\tm.suffix = s.slice(end) + m.suffix;\n}\n\nfunction pathStripBrace(m, left, right) {\n\tvar str = m.path,\n\t\tre = new RegExp(\"[\\\\\" + left + \"\\\\\" + right + \"]\", \"g\"),\n\t\tmatch, count = 0, end;\n\n\t// Match loop\n\twhile ((match = re.exec(str))) {\n\t\tif (count % 2 == 0) {\n\t\t\tend = match.index;\n\t\t\tif (match[0] == right) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tif (match[0] == left) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcount++;\n\t}\n\n\tif (!match && count % 2 == 0) {\n\t\treturn;\n\t}\n\t\n\tm.end -= m.path.length - end;\n\tm.path = str.slice(0, end);\n\tm.suffix = str.slice(end) + m.suffix;\n}\n\nfunction isIP(s) {\n\tvar m, i;\n\tif (!(m = s.match(/^(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})$/))) {\n\t\treturn false;\n\t}\n\tfor (i = 1; i < m.length; i++) {\n\t\tif (+m[i] > 255 || (m[i].length > 1 && m[i][0] == \"0\")) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction inTLDS(domain) {\n\tvar match = domain.match(/\\.([^.]+)$/);\n\tif (!match) {\n\t\treturn false;\n\t}\n\tvar key = match[1].toLowerCase();\n  // eslint-disable-next-line no-prototype-builtins\n\treturn TLD_TABLE.hasOwnProperty(key);\n}\n\nclass UrlMatcher {\n\tconstructor(options = {}) {\n\t\tthis.options = options;\n\t\tthis.regex = buildRegex(options);\n\t}\n\t\n\t*match(text) {\n\t\tvar {\n\t\t\t\tfuzzyIp = true,\n\t\t\t\tignoreMustache = false,\n        mail = true\n\t\t\t} = this.options,\n\t\t\t{\n\t\t\t\turl,\n\t\t\t\tinvalidSuffix,\n\t\t\t\tmustache\n\t\t\t} = this.regex,\n\t\t\turlLastIndex, mustacheLastIndex;\n\t\t\t\n\t\tmustache.lastIndex = 0;\n\t\turl.lastIndex = 0;\n\t\t\n\t\tvar mustacheMatch, mustacheRange;\n\t\tif (ignoreMustache) {\n\t\t\tmustacheMatch = mustache.exec(text);\n\t\t\tif (mustacheMatch) {\n\t\t\t\tmustacheRange = {\n\t\t\t\t\tstart: mustacheMatch.index,\n\t\t\t\t\tend: mustache.lastIndex\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar urlMatch;\n\t\twhile ((urlMatch = url.exec(text))) {\n      const result = {\n        start: 0,\n        end: 0,\n        \n        text: \"\",\n        url: \"\",\n        \n        prefix: urlMatch[1],\n        custom: urlMatch[2],\n        protocol: urlMatch[3],\n        auth: urlMatch[4] || \"\",\n        domain: urlMatch[5],\n        port: urlMatch[6] || \"\",\n        path: urlMatch[7] || \"\",\n        suffix: urlMatch[8]\n      };\n      \n      if (result.custom) {\n        result.start = urlMatch.index;\n        result.end = url.lastIndex;\n        result.text = result.url = urlMatch[0];\n\t\t\t} else {\n        \n        result.start = urlMatch.index + result.prefix.length;\n        result.end = url.lastIndex - result.suffix.length;\n\t\t\t}\n\t\t\t\n\t\t\tif (mustacheRange && mustacheRange.end <= result.start) {\n\t\t\t\tmustacheMatch = mustache.exec(text);\n\t\t\t\tif (mustacheMatch) {\n\t\t\t\t\tmustacheRange.start = mustacheMatch.index;\n\t\t\t\t\tmustacheRange.end = mustache.lastIndex;\n\t\t\t\t} else {\n\t\t\t\t\tmustacheRange = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// ignore urls inside mustache pair\n\t\t\tif (mustacheRange && result.start < mustacheRange.end && result.end >= mustacheRange.start) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tif (!result.custom) {\n\t\t\t\t// adjust path and suffix\n\t\t\t\tif (result.path) {\n\t\t\t\t\t// Strip BBCode\n\t\t\t\t\tpathStrip(result, /\\[\\/?(b|i|u|url|img|quote|code|size|color)\\].*/i, \"\");\n\t\t\t\t\t\n\t\t\t\t\t// Strip braces\n\t\t\t\t\tpathStripBrace(result, \"(\", \")\");\n\t\t\t\t\tpathStripBrace(result, \"[\", \"]\");\n\t\t\t\t\tpathStripBrace(result, \"{\", \"}\");\n\t\t\t\t\t\n\t\t\t\t\t// Strip quotes\n\t\t\t\t\tpathStripQuote(result, \"'\");\n\t\t\t\t\tpathStripQuote(result, '\"');\n\t\t\t\t\t\n\t\t\t\t\t// Remove trailing \".,?\"\n\t\t\t\t\tpathStrip(result, /(^|[^-_])[.,?]+$/, \"$1\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// check suffix\n\t\t\t\tif (invalidSuffix && invalidSuffix.test(result.suffix)) {\n\t\t\t\t\tif (/\\s$/.test(result.suffix)) {\n\t\t\t\t\t\turl.lastIndex--;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n        \n        // ignore fuzzy ip\n\t\t\t\tif (!fuzzyIp && isIP(result.domain) &&\n            !result.protocol && !result.auth && !result.path) {\n          continue;\n        }\n        \n\t\t\t\t// mailto protocol\n\t\t\t\tif (!result.protocol && result.auth) {\n\t\t\t\t\tvar matchMail = result.auth.match(/^mailto:(.+)/);\n\t\t\t\t\tif (matchMail) {\n\t\t\t\t\t\tresult.protocol = \"mailto:\";\n\t\t\t\t\t\tresult.auth = matchMail[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// http alias\n\t\t\t\tif (result.protocol && result.protocol.match(/^(hxxp|h\\*\\*p|ttp)/)) {\n\t\t\t\t\tresult.protocol = \"http://\";\n\t\t\t\t}\n\n\t\t\t\t// guess protocol\n\t\t\t\tif (!result.protocol) {\n\t\t\t\t\tvar domainMatch;\n\t\t\t\t\tif ((domainMatch = result.domain.match(/^(ftp|irc)/))) {\n\t\t\t\t\t\tresult.protocol = domainMatch[0] + \"://\";\n\t\t\t\t\t} else if (result.domain.match(/^(www|web)/)) {\n\t\t\t\t\t\tresult.protocol = \"http://\";\n\t\t\t\t\t} else if (result.auth && result.auth.indexOf(\":\") < 0 && !result.path) {\n\t\t\t\t\t\tresult.protocol = \"mailto:\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.protocol = \"http://\";\n\t\t\t\t\t}\n\t\t\t\t}\n        \n        // ignore mail\n        if (!mail && result.protocol === \"mailto:\") {\n          continue;\n        }\n        \n\t\t\t\t// verify domain\n        if (!isIP(result.domain)) {\n          if (/^(http|https|mailto)/.test(result.protocol) && !inTLDS(result.domain)) {\n            continue;\n          }\n          \n          const invalidLabel = getInvalidLabel(result.domain);\n          if (invalidLabel) {\n            url.lastIndex = urlMatch.index + invalidLabel.index + 1;\n            continue;\n          }\n        }\n\n\t\t\t\t// Create URL\n\t\t\t\tresult.url = result.protocol + (result.auth && result.auth + \"@\") + result.domain + result.port + result.path;\n\t\t\t\tresult.text = text.slice(result.start, result.end);\n\t\t\t}\n\t\t\t\n\t\t\t// since regex is shared with other parse generators, cache lastIndex position and restore later\n\t\t\tmustacheLastIndex = mustache.lastIndex;\n\t\t\turlLastIndex = url.lastIndex;\n\t\t\t\n\t\t\tyield result;\n\t\t\t\n\t\t\turl.lastIndex = urlLastIndex;\n\t\t\tmustache.lastIndex = mustacheLastIndex;\n\t\t}\n\t}\n}\n\nfunction getInvalidLabel(domain) {\n  // https://tools.ietf.org/html/rfc1035\n  // https://serverfault.com/questions/638260/is-it-valid-for-a-hostname-to-start-with-a-digit\n  let index = 0;\n  const parts = domain.split(\".\");\n  for (const part of parts) {\n    if (\n      !part ||\n      part.startsWith(\"-\") ||\n      part.endsWith(\"-\")\n    ) {\n      return {\n        index,\n        value: part\n      };\n    }\n    index += part.length + 1;\n  }\n}\n\nmodule.exports = {\n\tUrlMatcher\n};\n","/**\n * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)\n *\n * @copyright Yusuke Kawasaki\n * @license MIT\n * @constructor\n * @see https://github.com/kawanet/event-lite\n * @see http://kawanet.github.io/event-lite/EventLite.html\n * @example\n * var EventLite = require(\"event-lite\");\n *\n * function MyClass() {...}             // your class\n *\n * EventLite.mixin(MyClass.prototype);  // import event methods\n *\n * var obj = new MyClass();\n * obj.on(\"foo\", function() {...});     // add event listener\n * obj.once(\"bar\", function() {...});   // add one-time event listener\n * obj.emit(\"foo\");                     // dispatch event\n * obj.emit(\"bar\");                     // dispatch another event\n * obj.off(\"foo\");                      // remove event listener\n */\n\nexport default function EventLite() {\n  if (!(this instanceof EventLite)) return new EventLite();\n}\n\n// (function(EventLite) {\n  // export the class for node.js\n  // if (\"undefined\" !== typeof module) module.exports = EventLite;\n\n  // property name to hold listeners\n  var LISTENERS = \"listeners\";\n\n  // methods to export\n  var methods = {\n    on: on,\n    once: once,\n    off: off,\n    emit: emit\n  };\n\n  // mixin to self\n  mixin(EventLite.prototype);\n\n  // export mixin function\n  EventLite.mixin = mixin;\n\n  /**\n   * Import on(), once(), off() and emit() methods into target object.\n   *\n   * @function EventLite.mixin\n   * @param target {Prototype}\n   */\n\n  function mixin(target) {\n    for (var key in methods) {\n      target[key] = methods[key];\n    }\n    return target;\n  }\n\n  /**\n   * Add an event listener.\n   *\n   * @function EventLite.prototype.on\n   * @param type {string}\n   * @param func {Function}\n   * @returns {EventLite} Self for method chaining\n   */\n\n  function on(type, func) {\n    getListeners(this, type).push(func);\n    return this;\n  }\n\n  /**\n   * Add one-time event listener.\n   *\n   * @function EventLite.prototype.once\n   * @param type {string}\n   * @param func {Function}\n   * @returns {EventLite} Self for method chaining\n   */\n\n  function once(type, func) {\n    var that = this;\n    wrap.originalListener = func;\n    getListeners(that, type).push(wrap);\n    return that;\n\n    function wrap() {\n      off.call(that, type, wrap);\n      func.apply(this, arguments);\n    }\n  }\n\n  /**\n   * Remove an event listener.\n   *\n   * @function EventLite.prototype.off\n   * @param [type] {string}\n   * @param [func] {Function}\n   * @returns {EventLite} Self for method chaining\n   */\n\n  function off(type, func) {\n    var that = this;\n    var listners;\n    if (!arguments.length) {\n      delete that[LISTENERS];\n    } else if (!func) {\n      listners = that[LISTENERS];\n      if (listners) {\n        delete listners[type];\n        if (!Object.keys(listners).length) return off.call(that);\n      }\n    } else {\n      listners = getListeners(that, type, true);\n      if (listners) {\n        listners = listners.filter(ne);\n        if (!listners.length) return off.call(that, type);\n        that[LISTENERS][type] = listners;\n      }\n    }\n    return that;\n\n    function ne(test) {\n      return test !== func && test.originalListener !== func;\n    }\n  }\n\n  /**\n   * Dispatch (trigger) an event.\n   *\n   * @function EventLite.prototype.emit\n   * @param type {string}\n   * @param [value] {*}\n   * @returns {boolean} True when a listener received the event\n   */\n\n  function emit(type, value) {\n    var that = this;\n    var listeners = getListeners(that, type, true);\n    if (!listeners) return false;\n    var arglen = arguments.length;\n    if (arglen === 1) {\n      listeners.forEach(zeroarg);\n    } else if (arglen === 2) {\n      listeners.forEach(onearg);\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      listeners.forEach(moreargs);\n    }\n    return !!listeners.length;\n\n    function zeroarg(func) {\n      func.call(that);\n    }\n\n    function onearg(func) {\n      func.call(that, value);\n    }\n\n    function moreargs(func) {\n      func.apply(that, args);\n    }\n  }\n\n  /**\n   * @ignore\n   */\n\n  function getListeners(that, type, readonly) {\n    if (readonly && !that[LISTENERS]) return;\n    var listeners = that[LISTENERS] || (that[LISTENERS] = {});\n    return listeners[type] || (listeners[type] = []);\n  }\n\n// })(EventLite);\n","/* eslint-env browser */\n\nvar Events = require(\"event-lite\");\n\nvar INVALID_TAGS = {\n\ta: true,\n\tnoscript: true,\n\toption: true,\n\tscript: true,\n\tstyle: true,\n\ttextarea: true,\n\tsvg: true,\n\tcanvas: true,\n\tbutton: true,\n\tselect: true,\n\ttemplate: true,\n\tmeter: true,\n\tprogress: true,\n\tmath: true,\n\ttime: true\n};\n\nclass Pos {\n\tconstructor(container, offset, i = 0) {\n\t\tthis.container = container;\n\t\tthis.offset = offset;\n\t\tthis.i = i;\n\t}\n\t\n\tadd(change) {\n\t\tvar cont = this.container,\n\t\t\toffset = this.offset;\n\n\t\tthis.i += change;\n\t\t\n\t\t// If the container is #text.parentNode\n\t\tif (cont.childNodes.length) {\n\t\t\tcont = cont.childNodes[offset];\n\t\t\toffset = 0;\n\t\t}\n\n\t\t// If the container is #text\n\t\twhile (cont) {\n\t\t\tif (cont.nodeType == 3) {\n\t\t\t\tif (!cont.LEN) {\n\t\t\t\t\tcont.LEN = cont.nodeValue.length;\n\t\t\t\t}\n\t\t\t\tif (offset + change <= cont.LEN) {\n\t\t\t\t\tthis.container = cont;\n\t\t\t\t\tthis.offset = offset + change;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tchange = offset + change - cont.LEN;\n\t\t\t\toffset = 0;\n\t\t\t}\n\t\t\tcont = cont.nextSibling;\n\t\t}\n\t}\n\t\n\tmoveTo(offset) {\n\t\tthis.add(offset - this.i);\n\t}\n}\n\nfunction cloneContents(range) {\n\tif (range.startContainer == range.endContainer) {\n\t\treturn document.createTextNode(range.toString());\n\t}\n\treturn range.cloneContents();\n}\n\nvar DEFAULT_OPTIONS = {\n\tmaxRunTime: 100,\n\ttimeout: 10000,\n\tnewTab: true,\n\tnoOpener: true,\n\tembedImage: true,\n  recursive: true,\n};\n\nclass Linkifier extends Events {\n\tconstructor(root, options = {}) {\n\t\tsuper();\n\t\tif (!(root instanceof Node)) {\n\t\t\toptions = root;\n\t\t\troot = options.root;\n\t\t}\n\t\tthis.root = root;\n\t\tthis.options = Object.assign({}, DEFAULT_OPTIONS, options);\n\t\tthis.aborted = false;\n\t}\n\tstart() {\n\t\tvar time = Date.now,\n\t\t\tstartTime = time(),\n\t\t\tchunks = this.generateChunks();\n\t\t\t\n\t\tvar next = () => {\n\t\t\tif (this.aborted) {\n\t\t\t\tthis.emit(\"error\", new Error(\"Aborted\"));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar chunkStart = time(),\n\t\t\t\tnow;\n\t\t\t\t\n\t\t\tdo {\n\t\t\t\tif (chunks.next().done) {\n\t\t\t\t\tthis.emit(\"complete\", time() - startTime);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while ((now = time()) - chunkStart < this.options.maxRunTime);\n\t\t\t\n\t\t\tif (now - startTime > this.options.timeout) {\n\t\t\t\tthis.emit(\"error\", new Error(`max execution time exceeded: ${now - startTime}, on ${this.root}`));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tsetTimeout(next);\n\t\t};\n\t\t\t\n\t\tsetTimeout(next);\n\t}\n\tabort() {\n\t\tthis.aborted = true;\n\t}\n\t*generateRanges() {\n\t\tvar {validator, recursive} = this.options;\n\t\tvar filter = {\n\t\t\tacceptNode: function(node) {\n\t\t\t\tif (validator && !validator(node)) {\n\t\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t\t}\n\t\t\t\tif (INVALID_TAGS[node.localName]) {\n\t\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t\t}\n\t\t\t\tif (node.localName == \"wbr\") {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\t\t\t\tif (node.nodeType == 3) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\t\t\t\treturn recursive ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_REJECT;\n\t\t\t}\n\t\t};\n\t\t// Generate linkified ranges.\n\t\tvar walker = document.createTreeWalker(\n\t\t\tthis.root,\n\t\t\tNodeFilter.SHOW_TEXT + NodeFilter.SHOW_ELEMENT,\n\t\t\tfilter\n\t\t), start, end, current, range;\n\n\t\tend = start = walker.nextNode();\n\t\tif (!start) {\n\t\t\treturn;\n\t\t}\n\t\trange = document.createRange();\n\t\trange.setStartBefore(start);\n\t\twhile ((current = walker.nextNode())) {\n\t\t\tif (end.nextSibling == current) {\n\t\t\t\tend = current;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\trange.setEndAfter(end);\n\t\t\tyield range;\n\n\t\t\tend = start = current;\n\t\t\trange.setStartBefore(start);\n\t\t}\n\t\trange.setEndAfter(end);\n\t\tyield range;\n\t}\n\t*generateChunks() {\n\t\tvar {matcher} = this.options;\n\t\tfor (var range of this.generateRanges()) {\n\t\t\tvar frag = null,\n\t\t\t\tpos = null,\n\t\t\t\ttext = range.toString(),\n\t\t\t\ttextRange = null;\n\t\t\tfor (var result of matcher.match(text)) {\n\t\t\t\tif (!frag) {\n\t\t\t\t\tfrag = document.createDocumentFragment();\n\t\t\t\t\tpos = new Pos(range.startContainer, range.startOffset);\n\t\t\t\t\ttextRange = range.cloneRange();\n\t\t\t\t}\n\t\t\t\t// clone text\n\t\t\t\tpos.moveTo(result.start);\n\t\t\t\ttextRange.setEnd(pos.container, pos.offset);\n\t\t\t\tfrag.appendChild(cloneContents(textRange));\n\t\t\t\t\n\t\t\t\t// clone link\n\t\t\t\ttextRange.collapse();\n\t\t\t\tpos.moveTo(result.end);\n\t\t\t\ttextRange.setEnd(pos.container, pos.offset);\n\t\t\t\t\n\t\t\t\tvar content = cloneContents(textRange),\n\t\t\t\t\tlink = this.buildLink(result, content);\n\n\t\t\t\ttextRange.collapse();\n\n\t\t\t\tfrag.appendChild(link);\n\t\t\t\tthis.emit(\"link\", {link, range, result, content});\n\t\t\t}\n\t\t\tif (pos) {\n\t\t\t\tpos.moveTo(text.length);\n\t\t\t\ttextRange.setEnd(pos.container, pos.offset);\n\t\t\t\tfrag.appendChild(cloneContents(textRange));\n\t\t\t\t\n\t\t\t\trange.deleteContents();\n\t\t\t\trange.insertNode(frag);\n\t\t\t}\n\t\t\tyield;\n\t\t}\n\t}\n\tbuildLink(result, content) {\n\t\tvar {newTab, embedImage, noOpener} = this.options;\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = result.url;\n\t\tlink.title = \"Linkify Plus Plus\";\n\t\tlink.className = \"linkifyplus\";\n\t\tif (newTab) {\n\t\t\tlink.target = \"_blank\";\n\t\t}\n\t\tif (noOpener) {\n\t\t\tlink.rel = \"noopener\";\n\t\t}\n\t\tvar child;\n\t\tif (embedImage && /^[^?#]+\\.(?:jpg|jpeg|png|apng|gif|svg|webp)(?:$|[?#])/i.test(result.url)) {\n\t\t\tchild = new Image;\n\t\t\tchild.src = result.url;\n\t\t\tchild.alt = result.text;\n\t\t} else {\n\t\t\tchild = content;\n\t\t}\n\t\tlink.appendChild(child);\n\t\treturn link;\n\t}\n}\n\nfunction linkify(...args) {\n\treturn new Promise((resolve, reject) => {\n\t\tvar linkifier = new Linkifier(...args);\n\t\tlinkifier.on(\"error\", reject);\n\t\tlinkifier.on(\"complete\", resolve);\n\t\tfor (var key of Object.keys(linkifier.options)) {\n\t\t\tif (key.startsWith(\"on\")) {\n\t\t\t\tlinkifier.on(key.slice(2), linkifier.options[key]);\n\t\t\t}\n\t\t}\n\t\tlinkifier.start();\n\t});\n}\n\nmodule.exports = {\n\tINVALID_TAGS,\n\tLinkifier,\n\tlinkify\n};\n"],"names":["RE","TLD_TABLE","regexEscape","text","replace","pathStrip","m","re","repl","s","path","end","length","suffix","slice","pathStripQuote","c","i","pos","endsWith","indexOf","pathStripBrace","left","right","match","str","RegExp","count","exec","index","isIP","inTLDS","domain","key","toLowerCase","hasOwnProperty","getInvalidLabel","parts","split","part","startsWith","value","EventLite","this","LISTENERS","methods","on","type","func","getListeners","push","once","that","wrap","originalListener","off","call","apply","arguments","emit","listeners","arglen","forEach","args","Array","prototype","mixin","target","listners","filter","test","Object","keys","readonly","INVALID_TAGS","a","noscript","option","script","style","textarea","svg","canvas","button","select","template","meter","progress","math","time","Pos","constructor","container","offset","add","change","cont","childNodes","nodeType","LEN","nodeValue","nextSibling","moveTo","cloneContents","range","startContainer","endContainer","document","createTextNode","toString","DEFAULT_OPTIONS","maxRunTime","timeout","newTab","noOpener","embedImage","recursive","Linkifier","Events","root","options","super","Node","assign","aborted","start","Date","now","startTime","chunks","generateChunks","next","Error","chunkStart","done","setTimeout","abort","generateRanges","current","validator","acceptNode","node","localName","NodeFilter","FILTER_REJECT","FILTER_ACCEPT","FILTER_SKIP","walker","createTreeWalker","SHOW_TEXT","SHOW_ELEMENT","nextNode","createRange","setStartBefore","setEndAfter","matcher","frag","textRange","result","createDocumentFragment","startOffset","cloneRange","setEnd","appendChild","collapse","content","link","buildLink","deleteContents","insertNode","child","createElement","href","url","title","className","rel","Image","src","alt","regex","unicode","customRules","standalone","boundaryLeft","boundaryRight","prefix","invalidSuffix","pattern","join","mustache","buildRegex","urlLastIndex","mustacheLastIndex","mustacheMatch","mustacheRange","urlMatch","fuzzyIp","ignoreMustache","mail","lastIndex","custom","protocol","auth","port","matchMail","domainMatch","invalidLabel","Promise","resolve","reject","linkifier"],"mappings":"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","x_google_ignoreList":[1]}